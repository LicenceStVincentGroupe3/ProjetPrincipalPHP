{% extends 'layout.html.twig' %}

{% block title %}
	{{ parent()}}Equipe commerciale
{% endblock %}

{# {% block contentSearch %}
{% endblock %} #}

{% block h1 %}Equipe commerciale{% endblock %}

{% block contentBodyContainer %}
<div>
	{% block contentBody %}

	<!--<button id="export" class="btn btn-success pull-right"><i class="glyphicon glyphicon-export"></i>&nbsp;Exporter</button>-->

	
	<!-- <div id="toolbar">
			<select class="form-control">
					<option value="">Exporter cette page</option>
					<option value="all">Exporter tous</option>
					<option value="selected">Exporter les lignes cochées</option>
			</select>
	</div> -->

	<form method="post">
		<div class="table-responsive">
			<table id="table" class="table sortable-table">
				<thead>
					<tr>
						<th style="width: 50px;padding-bottom: 0.5%;" class="no-sortable"><input type="checkbox" id="checkall"></th>
						<th style="width: 130px;" class="sortable" data-field="prenom">Prénom</th>
						<th style="width: 80px;" class="sortable" data-field="nom">Nom</th>
						<th style="width: 125px;" class="sortable" data-field="fonction">Fonction</th>
						<th style="width: 175px;" class="sortable" data-field="zone">Zone affectée</th>
						<th style="width: 150px;" class="sortable" data-field="entreprise">Entreprises</th>
						<th style="width: 125px;" class="sortable" data-field="contact">Contacts</th>
						<th style="width: 50px" class="table-field-other no-sortable" data-field="autre">&bull;&bull;&bull;</th>
					</tr>
				</thead>
				<tbody id="myTableBody">
					{% for commercial in listCom %}
					<tr>
						<td>
							<input type="checkbox" class="checkthis" name="deleteData[]" value="{{ commercial.Id }}">
						</td>
						<td>
							{% if commercial.CommercialPhoto is not null %}
                            <img src="{{asset('build/images/' ~ commercial.CommercialPhoto)}}" class="table-img-profile rounded-circle" title="Photo" alt="Photo de profil">
                            {% else %}
                            <img src="{{asset('build/Photo.png')}}" class="table-img-profile rounded-circle" title="Photo" alt="Photo de profil">
                            {% endif %}
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialFirstname}}
							</a>
						</td>
						<td>
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialName|upper}}
							</a>
						</td>
						<td>
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialJob}}
							</a>
						</td>
						<td>
							{% if commercial.IdCompanyCountry is not null %}
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.IdCompanyCountry.Label}}
							</a>
							{% endif %}
						</td>
						<td>
							<div class="commercial-nbCompany">
								<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{nbCompany[commercial.Id]}}
								</a>
							</div>
						</td>

						<td>
							<div class="commercial-nbContact">
								<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">
									{{nbContact[commercial.Id]}}
								</a>
							</div>
						</td>

						<td>
							{% if commercial.Email is not null %}
								<img src="{{asset('build/mail.png')}}" class="commercial-mail" title="{{commercial.Email}}" alt="Email du commercial">
							{% endif %}
							{% if commercial.CommercialPhone is not null %}
								<img src="{{asset('build/tel.png')}}" class="commercial-tel" title="{{commercial.CommercialPhone}}" alt="Tél. fixe direct du commercial">
							{% endif %}
						</td>
					</tr>
					{% else %}
					<tr>
					  <td>Aucun Commercial</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

		<!-- modal-dialog --> 
		<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
			<!-- modal-content -->
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
						<h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
					</div>
					<div class="modal-body">
						<div class="alert alert-danger">
							<span class="glyphicon glyphicon-warning-sign"></span>
							Are you sure you want to delete this Record?
						</div>
					</div>
					<div class="modal-footer ">
						<button type="button" class="btn btn-success">
							<span class="glyphicon glyphicon-ok-sign"></span>
							<input type="submit" name="delete" id="delete" value="Oui">
						</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">
							<span class="glyphicon glyphicon-remove"></span>
							No
						</button>
					</div>
				</div>
			</div>
		</div>
	</form>

	<div class="table-after">
		<div class="row">
			<div class="table-after-entry">
				<select id="table-nb-entry" class="table-nb-entry unset-outline">
					<option value="15">15</option>
					<option value="20">20</option>
					<option value="50">50</option>
					<option value="100">100</option>
					<option value="200">200</option>
				</select>
			</div>
			<div class="table-nb-functions">
				<span class="table-after-delete" data-title="Delete" data-toggle="modal" data-target="#delete">
					<i class="fas fa-trash"></i>
				</span>
				<!-- <span class="table-after-add">
					<i class="fas fa-user-plus"></i>
				</span> -->
			</div>
			<div class="table-after-pagination">
	           <ul class="pagination pagination-lg pager" id="myPager"></ul>
	        </div>
	        <div class="table-after-btn-add">
		       <button class="btn add-button">
					<a href="{{ path('newCommercial') }}">AJOUTER</a>
				</button>
			</div>
		</div>
	</div>

	 <!-- <div id="toolbar">
			<select class="form-control">
					<option value="">Exporter cette page</option>
					<option value="all">Exporter tous</option>
					<option value="selected">Exporter les lignes cochées</option>
			</select>
	</div>

	<form method="post">
		<div class="table-responsive">
			<table id="table" class="table sortable-table"
						 data-toggle="table"
						 data-filter-control="true"
						 data-show-export="true"
						 data-export-types="['csv']"
						 data-pagination="true"
						 data-page-size="2"
					     data-page-list="[5, 15, 20, 50, 100, 200]"
						 data-toolbar="#toolbar">
				<thead>
					<tr>
						<th><input type="checkbox" id="checkall"></th>
						<th data-field="prenom" data-sortable="true">Prénom</th>
						<th data-field="nom" data-sortable="true">Nom</th>
						<th data-field="fonction" data-sortable="true">Fonction</th>
						<th data-field="zone" data-sortable="true">Zone affectée</th>
						<th data-field="entreprise" data-sortable="true">Entreprises</th>
						<th data-field="contact" data-sortable="true">Contacts</th>
						<th class="table-field-other" data-field="autre">&bull;&bull;&bull;</th>
					</tr>
				</thead>
				<tbody id="field-filter">
					{% for commercial in listCom %}
					<tr>
						<td>
							<input type="checkbox" class="checkthis" name="deleteData[]" value="{{ commercial.Id }}">
						</td>
						<td>
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialFirstname}}
							</a>
						</td>
						<td>
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialName}}
							</a>
						</td>
						<td>
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.CommercialJob}}
							</a>
						</td>
						<td>
							{% if commercial.IdCompanyCountry is not null %}
							<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{commercial.IdCompanyCountry.Label}}
							</a>
							{% endif %}
						</td>
						<td>
							<div class="commercial-nbCompany">
								<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">	{{nbCompany[commercial.Id]}}
								</a>
							</div>
						</td>

						<td>
							<div class="commercial-nbContact">
								<a href="{{ path('editCommercial', {'id':commercial.Id}) }}">
									{{nbContact[commercial.Id]}}
								</a>
							</div>
						</td>

						<td>
							{% if commercial.Email is not null %}
								<img src="{{asset('build/mail.png')}}" class="commercial-mail" title="{{commercial.Email}}" alt="Email du commercial">
							{% endif %}
							{% if commercial.CommercialPhone is not null %}
								<img src="{{asset('build/tel.png')}}" class="commercial-tel" title="{{commercial.CommercialPhone}}" alt="Tél. fixe direct du commercial">
							{% endif %}
						</td>
					</tr>
					{% else %}
					<tr>
					  <td>Aucun Commercial</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

		 modal-dialog 
		<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
			 modal-content
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
						</button>
						<h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
					</div>
					<div class="modal-body">
						<div class="alert alert-danger">
							<span class="glyphicon glyphicon-warning-sign"></span>
							Are you sure you want to delete this Record?
						</div>
					</div>
					<div class="modal-footer ">
						<button type="button" class="btn btn-success">
							<span class="glyphicon glyphicon-ok-sign"></span>
							<input type="submit" name="delete" id="delete" value="Oui">
						</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">
							<span class="glyphicon glyphicon-remove"></span>
							No
						</button>
					</div>
				</div>
			</div>
		</div>
	</form>

	<button class="btn add-button">
		<a href="{{ path('newCommercial') }}">
			Ajouter
		</a>
	</button>

	<div class="rounded">								
		<button class="btn btn-danger pull-right"  data-title="Delete" data-toggle="modal" data-target="#delete">
			<span class="glyphicon glyphicon-trash"></span>
			Supprimer
		</button>
	</div> -->

	{% endblock %}
</div>
{% endblock %}
