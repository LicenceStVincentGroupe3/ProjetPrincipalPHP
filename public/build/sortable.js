(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["sortable"],{

/***/ "./assets/css/sortable.css":
/*!*********************************!*\
  !*** ./assets/css/sortable.css ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/sortable-table.js":
/*!*************************************!*\
  !*** ./assets/js/sortable-table.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ../css/sortable.css */ "./assets/css/sortable.css");

__webpack_require__(/*! ../js/sortable.js */ "./assets/js/sortable.js");

/***/ }),

/***/ "./assets/js/sortable.js":
/*!*******************************!*\
  !*** ./assets/js/sortable.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* Code JS du trie des champs d'un tableau */
function findAncestor(el, cls) {
  while ((el = el.parentElement) && !el.classList.contains(cls)) {
    ;
  }

  return el;
}

function unformatNumberString(number) {
  number = number.replace(/[^\d\.-]/g, '');
  return Number(number);
}

function extractStringContent(s) {
  var span = document.createElement('span');
  span.innerHTML = s;
  return span.textContent || span.innerText;
}

;

function setColHeaderDirection(newDirection, colIndex, colHeaders) {
  for (var index = 0; index < colHeaders.length; index++) {
    if (index == colIndex) {
      colHeaders[colIndex].setAttribute("data-sort-direction", newDirection);
    } else {
      colHeaders[index].setAttribute("data-sort-direction", 0);
    }
  }
}

function renderSortedTable(table, data) {
  var tableRows = table.getElementsByTagName("tbody")[0].getElementsByTagName("tr");

  for (var rowIndex = 0; rowIndex < tableRows.length; rowIndex++) {
    var tableRowCells = tableRows[rowIndex].getElementsByTagName("td");

    for (var cellIndex = 0; cellIndex < tableRowCells.length; cellIndex++) {
      tableRowCells[cellIndex].innerHTML = data[rowIndex][cellIndex];
    }
  }
}

$(document).ready(function () {
  var sortableTables = document.getElementsByClassName("sortable-table");
  var tablesData = [];
  var test = $("#table");

  var _loop = function _loop(tableIndex) {
    sortableTables[tableIndex].setAttribute("data-sort-index", tableIndex); // fill tablesData

    var tableRows = sortableTables[tableIndex].getElementsByTagName("tbody")[0].getElementsByTagName("tr");

    for (var rowIndex = 0; rowIndex < tableRows.length; rowIndex++) {
      var tableRowCells = tableRows[rowIndex].getElementsByTagName("td");

      for (var cellIndex = 0; cellIndex < tableRowCells.length; cellIndex++) {
        if (tablesData[tableIndex] === void 0) {
          tablesData.splice(tableIndex, 0, []);
        }

        if (tablesData[tableIndex][rowIndex] === void 0) {
          tablesData[tableIndex].splice(rowIndex, 0, []);
        }

        tablesData[tableIndex][rowIndex].splice(cellIndex, 0, tableRowCells[cellIndex].innerHTML);
      }
    } // bind headers to event


    var tableHeaders = sortableTables[tableIndex].getElementsByTagName("thead")[0].getElementsByTagName("tr")[0].getElementsByTagName("th");

    var _loop2 = function _loop2(headerIndex) {
      var colIsNumeric = tableHeaders[headerIndex].classList.contains("numeric-sort");
      tableHeaders[headerIndex].setAttribute("data-sort-direction", 0);
      tableHeaders[headerIndex].setAttribute("data-sort-index", headerIndex);
      $(".no-sortable").removeAttr("data-sort-direction");
      $(".no-sortable").removeAttr("data-sort-index"); // Header Click Event

      tableHeaders[headerIndex].addEventListener('click', function () {
        var colSortDirection = this.getAttribute("data-sort-direction");
        var headerIndex = this.getAttribute("data-sort-index");
        var tableIndex = findAncestor(this, "sortable-table").getAttribute("data-sort-index");

        if (colSortDirection == 1) {
          setColHeaderDirection(-1, headerIndex, tableHeaders);
        } else {
          setColHeaderDirection(1, headerIndex, tableHeaders);
        }

        tablesData[tableIndex] = tablesData[tableIndex].sort(function (a, b) {
          var x = extractStringContent(a[headerIndex]);
          var y = extractStringContent(b[headerIndex]);

          if (colIsNumeric) {
            x = unformatNumberString(x);
            y = unformatNumberString(y);
          }

          if (x === y) {
            return 0;
          } else {
            if (colSortDirection == 1) {
              // it was up and now it's down
              return x > y ? -1 : 1;
            } else {
              return x < y ? -1 : 1;
            }
          }
        });
        renderSortedTable(sortableTables[tableIndex], tablesData[tableIndex]);
      });
    };

    for (var headerIndex = 0; headerIndex < tableHeaders.length; headerIndex++) {
      _loop2(headerIndex);
    }
  };

  for (var tableIndex = 0; tableIndex < sortableTables.length; tableIndex++) {
    _loop(tableIndex);
  }
});

/***/ })

},[["./assets/js/sortable-table.js","runtime"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvY3NzL3NvcnRhYmxlLmNzcz9iMjJjIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9zb3J0YWJsZS10YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc29ydGFibGUuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImZpbmRBbmNlc3RvciIsImVsIiwiY2xzIiwicGFyZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidW5mb3JtYXROdW1iZXJTdHJpbmciLCJudW1iZXIiLCJyZXBsYWNlIiwiTnVtYmVyIiwiZXh0cmFjdFN0cmluZ0NvbnRlbnQiLCJzIiwic3BhbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRleHRDb250ZW50IiwiaW5uZXJUZXh0Iiwic2V0Q29sSGVhZGVyRGlyZWN0aW9uIiwibmV3RGlyZWN0aW9uIiwiY29sSW5kZXgiLCJjb2xIZWFkZXJzIiwiaW5kZXgiLCJsZW5ndGgiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJTb3J0ZWRUYWJsZSIsInRhYmxlIiwiZGF0YSIsInRhYmxlUm93cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicm93SW5kZXgiLCJ0YWJsZVJvd0NlbGxzIiwiY2VsbEluZGV4IiwiJCIsInJlYWR5Iiwic29ydGFibGVUYWJsZXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidGFibGVzRGF0YSIsInRlc3QiLCJ0YWJsZUluZGV4Iiwic3BsaWNlIiwidGFibGVIZWFkZXJzIiwiaGVhZGVySW5kZXgiLCJjb2xJc051bWVyaWMiLCJyZW1vdmVBdHRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbFNvcnREaXJlY3Rpb24iLCJnZXRBdHRyaWJ1dGUiLCJzb3J0IiwiYSIsImIiLCJ4IiwieSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsdUM7Ozs7Ozs7Ozs7O0FDQUFBLG1CQUFPLENBQUMsc0RBQUQsQ0FBUDs7QUFDQUEsbUJBQU8sQ0FB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QUNBLGNBQUlVLENBQUMsR0FBRzFDLG9CQUFvQixDQUFDd0MsQ0FBQyxDQUFDUixXQUFELENBQUYsQ0FBNUI7O0FBQ0EsY0FBR0MsWUFBSCxFQUFpQjtBQUNmUSxhQUFDLEdBQUc3QyxvQkFBb0IsQ0FBQzZDLENBQUQsQ0FBeEI7QUFDQUMsYUFBQyxHQUFHOUMsb0JBQW9CLENBQUM4QyxDQUFELENBQXhCO0FBQ0Q7O0FBRUQsY0FBSUQsQ0FBQyxLQUFLQyxDQUFWLEVBQWE7QUFDWCxtQkFBTyxDQUFQO0FBQ0QsV0FGRCxNQUdLO0FBQ0gsZ0JBQUdOLGdCQUFnQixJQUFJLENBQXZCLEVBQTBCO0FBQUU7QUFDMUIscUJBQVFLLENBQUMsR0FBR0MsQ0FBTCxHQUFVLENBQUMsQ0FBWCxHQUFlLENBQXRCO0FBQ0QsYUFGRCxNQUVPO0FBQ0wscUJBQVFELENBQUMsR0FBR0MsQ0FBTCxHQUFVLENBQUMsQ0FBWCxHQUFlLENBQXRCO0FBQ0Q7QUFDRjtBQUNGLFNBbEJ3QixDQUF6QjtBQW1CQTNCLHlCQUFpQixDQUFDVSxjQUFjLENBQUNJLFVBQUQsQ0FBZixFQUE2QkYsVUFBVSxDQUFDRSxVQUFELENBQXZDLENBQWpCO0FBQ0QsT0E3QkQ7QUEvQnNCOztBQXdCeEIsU0FBSyxJQUFJRyxXQUFXLEdBQUcsQ0FBdkIsRUFBMEJBLFdBQVcsR0FBR0QsWUFBWSxDQUFDbEIsTUFBckQsRUFBNkRtQixXQUFXLEVBQXhFLEVBQTRFO0FBQUEsYUFBbkVBLFdBQW1FO0FBcUMzRTtBQTdEdUI7O0FBSzFCLE9BQUssSUFBSUgsVUFBVSxHQUFHLENBQXRCLEVBQXlCQSxVQUFVLEdBQUdKLGNBQWMsQ0FBQ1osTUFBckQsRUFBNkRnQixVQUFVLEVBQXZFLEVBQTJFO0FBQUEsVUFBbEVBLFVBQWtFO0FBeUQxRTtBQUNGLENBL0RELEUiLCJmaWxlIjoic29ydGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCJyZXF1aXJlKCcuLi9jc3Mvc29ydGFibGUuY3NzJyk7XHJcbnJlcXVpcmUoJy4uL2pzL3NvcnRhYmxlLmpzJyk7IiwiLyogQ29kZSBKUyBkdSB0cmllIGRlcyBjaGFtcHMgZCd1biB0YWJsZWF1ICovXHJcblxyXG5mdW5jdGlvbiBmaW5kQW5jZXN0b3IgKGVsLCBjbHMpIHtcclxuICB3aGlsZSAoKGVsID0gZWwucGFyZW50RWxlbWVudCkgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhjbHMpKTtcclxuICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuZm9ybWF0TnVtYmVyU3RyaW5nKG51bWJlcikge1xyXG4gIG51bWJlciA9IG51bWJlci5yZXBsYWNlKC9bXlxcZFxcLi1dL2csICcnKTtcclxuICByZXR1cm4gTnVtYmVyKG51bWJlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RTdHJpbmdDb250ZW50KHMpIHtcclxuICB2YXIgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICBzcGFuLmlubmVySFRNTCA9IHM7XHJcbiAgcmV0dXJuIHNwYW4udGV4dENvbnRlbnQgfHwgc3Bhbi5pbm5lclRleHQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzZXRDb2xIZWFkZXJEaXJlY3Rpb24obmV3RGlyZWN0aW9uLCBjb2xJbmRleCwgY29sSGVhZGVycykge1xyXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjb2xIZWFkZXJzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgaWYoaW5kZXggPT0gY29sSW5kZXgpIHtcclxuICAgICAgY29sSGVhZGVyc1tjb2xJbmRleF0uc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0LWRpcmVjdGlvblwiLCBuZXdEaXJlY3Rpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29sSGVhZGVyc1tpbmRleF0uc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0LWRpcmVjdGlvblwiLCAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlclNvcnRlZFRhYmxlKHRhYmxlLCBkYXRhKSB7XHJcbiAgbGV0IHRhYmxlUm93cyA9IHRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0clwiKTtcclxuICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgdGFibGVSb3dzLmxlbmd0aDsgcm93SW5kZXgrKykge1xyXG4gICAgbGV0IHRhYmxlUm93Q2VsbHMgPSB0YWJsZVJvd3Nbcm93SW5kZXhdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIik7XHJcbiAgICBmb3IgKGxldCBjZWxsSW5kZXggPSAwOyBjZWxsSW5kZXggPCB0YWJsZVJvd0NlbGxzLmxlbmd0aDsgY2VsbEluZGV4KyspIHtcclxuICAgICAgdGFibGVSb3dDZWxsc1tjZWxsSW5kZXhdLmlubmVySFRNTCA9IGRhdGFbcm93SW5kZXhdW2NlbGxJbmRleF07XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gIHZhciBzb3J0YWJsZVRhYmxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzb3J0YWJsZS10YWJsZVwiKTtcclxuICB2YXIgdGFibGVzRGF0YSA9IFtdO1xyXG4gIHZhciB0ZXN0ID0gJChcIiN0YWJsZVwiKTtcclxuIFxyXG4gIGZvciAobGV0IHRhYmxlSW5kZXggPSAwOyB0YWJsZUluZGV4IDwgc29ydGFibGVUYWJsZXMubGVuZ3RoOyB0YWJsZUluZGV4KyspIHtcclxuICAgIHNvcnRhYmxlVGFibGVzW3RhYmxlSW5kZXhdLnNldEF0dHJpYnV0ZShcImRhdGEtc29ydC1pbmRleFwiLCB0YWJsZUluZGV4KTtcclxuICAgIC8vIGZpbGwgdGFibGVzRGF0YVxyXG4gICAgbGV0IHRhYmxlUm93cyA9IHNvcnRhYmxlVGFibGVzW3RhYmxlSW5kZXhdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0clwiKTtcclxuICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCB0YWJsZVJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XHJcbiAgICAgIGxldCB0YWJsZVJvd0NlbGxzID0gdGFibGVSb3dzW3Jvd0luZGV4XS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpO1xyXG4gICAgICBmb3IgKGxldCBjZWxsSW5kZXggPSAwOyBjZWxsSW5kZXggPCB0YWJsZVJvd0NlbGxzLmxlbmd0aDsgY2VsbEluZGV4KyspIHtcclxuICAgICAgICBpZiAodGFibGVzRGF0YVt0YWJsZUluZGV4XSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICB0YWJsZXNEYXRhLnNwbGljZSh0YWJsZUluZGV4LCAwLCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWJsZXNEYXRhW3RhYmxlSW5kZXhdW3Jvd0luZGV4XSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICB0YWJsZXNEYXRhW3RhYmxlSW5kZXhdLnNwbGljZShyb3dJbmRleCwgMCwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YWJsZXNEYXRhW3RhYmxlSW5kZXhdW3Jvd0luZGV4XS5zcGxpY2UoY2VsbEluZGV4LCAwLCB0YWJsZVJvd0NlbGxzW2NlbGxJbmRleF0uaW5uZXJIVE1MKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYmluZCBoZWFkZXJzIHRvIGV2ZW50XHJcbiAgICBsZXQgdGFibGVIZWFkZXJzID0gc29ydGFibGVUYWJsZXNbdGFibGVJbmRleF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0aGVhZFwiKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRyXCIpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGhcIik7XHJcbiAgICBmb3IgKGxldCBoZWFkZXJJbmRleCA9IDA7IGhlYWRlckluZGV4IDwgdGFibGVIZWFkZXJzLmxlbmd0aDsgaGVhZGVySW5kZXgrKykge1xyXG4gICAgICBsZXQgY29sSXNOdW1lcmljID0gdGFibGVIZWFkZXJzW2hlYWRlckluZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoXCJudW1lcmljLXNvcnRcIik7XHJcbiAgICAgIHRhYmxlSGVhZGVyc1toZWFkZXJJbmRleF0uc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0LWRpcmVjdGlvblwiLCAwKTtcclxuICAgICAgdGFibGVIZWFkZXJzW2hlYWRlckluZGV4XS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnQtaW5kZXhcIiwgaGVhZGVySW5kZXgpO1xyXG4gICAgICAkKFwiLm5vLXNvcnRhYmxlXCIpLnJlbW92ZUF0dHIoXCJkYXRhLXNvcnQtZGlyZWN0aW9uXCIpO1xyXG4gICAgICAkKFwiLm5vLXNvcnRhYmxlXCIpLnJlbW92ZUF0dHIoXCJkYXRhLXNvcnQtaW5kZXhcIik7XHJcbiAgICAgIC8vIEhlYWRlciBDbGljayBFdmVudFxyXG4gICAgICB0YWJsZUhlYWRlcnNbaGVhZGVySW5kZXhdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGNvbFNvcnREaXJlY3Rpb24gPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtc29ydC1kaXJlY3Rpb25cIik7XHJcbiAgICAgICAgbGV0IGhlYWRlckluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnQtaW5kZXhcIik7XHJcbiAgICAgICAgbGV0IHRhYmxlSW5kZXggPSBmaW5kQW5jZXN0b3IodGhpcywgXCJzb3J0YWJsZS10YWJsZVwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnQtaW5kZXhcIik7XHJcbiAgICAgICAgaWYoY29sU29ydERpcmVjdGlvbiA9PSAxKSB7XHJcbiAgICAgICAgICBzZXRDb2xIZWFkZXJEaXJlY3Rpb24oLTEsIGhlYWRlckluZGV4LCB0YWJsZUhlYWRlcnMpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldENvbEhlYWRlckRpcmVjdGlvbigxLCBoZWFkZXJJbmRleCwgdGFibGVIZWFkZXJzKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YWJsZXNEYXRhW3RhYmxlSW5kZXhdID0gdGFibGVzRGF0YVt0YWJsZUluZGV4XS5zb3J0KGZ1bmN0aW9uKGEsYikge1xyXG4gICAgICAgICAgbGV0IHggPSBleHRyYWN0U3RyaW5nQ29udGVudChhW2hlYWRlckluZGV4XSk7XHJcbiAgICAgICAgICBsZXQgeSA9IGV4dHJhY3RTdHJpbmdDb250ZW50KGJbaGVhZGVySW5kZXhdKTtcclxuICAgICAgICAgIGlmKGNvbElzTnVtZXJpYykge1xyXG4gICAgICAgICAgICB4ID0gdW5mb3JtYXROdW1iZXJTdHJpbmcoeCk7XHJcbiAgICAgICAgICAgIHkgPSB1bmZvcm1hdE51bWJlclN0cmluZyh5KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoeCA9PT0geSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZihjb2xTb3J0RGlyZWN0aW9uID09IDEpIHsgLy8gaXQgd2FzIHVwIGFuZCBub3cgaXQncyBkb3duXHJcbiAgICAgICAgICAgICAgcmV0dXJuICh4ID4geSkgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICh4IDwgeSkgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZW5kZXJTb3J0ZWRUYWJsZShzb3J0YWJsZVRhYmxlc1t0YWJsZUluZGV4XSwgdGFibGVzRGF0YVt0YWJsZUluZGV4XSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==